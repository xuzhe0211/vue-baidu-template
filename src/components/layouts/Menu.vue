<template>
    <el-menu
        class="data-management-center-aside-menu"
        :collapse-transition="false"
        :default-active="$route.path"
        :unique-opened="true"
        :router="true"
        background-color="#252629"
        text-color="rgb(230, 237, 255)"
        active-text-color="#ffffff"
    >
        <template v-for="menu in routerSides">
            <!-- 有子菜单 -->
            <template v-if="!menu.siderHidden">
                <template v-if="menu.children && menu.children.length > 1">
                    <el-submenu :key="getItemPath(menu.path)" :index="getItemPath(menu.path)">
                        <template slot="title">
                            <!-- <i class="submenu-icon" :class="`submenu-icon-${menu.meta.icon}`"></i> -->
                            <svg
                                width="16px"
                                height="16px"
                                class="submenu-icon"
                                viewBox="0 0 16 16"
                                version="1.1"
                                xmlns="http://www.w3.org/2000/svg"
                                xmlns:xlink="http://www.w3.org/1999/xlink"
                            >
                                <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <g id="Artboard" transform="translate(-205.000000, -58.000000)">
                                        <g transform="translate(205.000000, 58.000000)">
                                            <rect
                                                id="Rectangle"
                                                fill="#000000"
                                                opacity="0"
                                                x="0"
                                                y="0"
                                                width="16"
                                                height="16"
                                            ></rect>
                                            <template>
                                                <path
                                                    v-if="menu.meta.icon === 'rsu-index'"
                                                    d="M4.125,8.25 C4.19403559,8.25 4.25,8.30596441 4.25,8.375 L4.25,13.75 L6,13.75 L6,10 C6,9.86192881 6.11192881,9.75 6.25,9.75 L9.75,9.75 C9.88807119,9.75 10,9.86192881 10,10 L10,13.75 L12,13.75 L12,8.375 C12,8.30596441 12.0559644,8.25 12.125,8.25 L12.875,8.25 C12.9440356,8.25 13,8.30596441 13,8.375 L13,14.5 C13,14.6380712 12.8880712,14.75 12.75,14.75 L3.5,14.75 C3.36192881,14.75 3.25,14.6380712 3.25,14.5 L3.25,8.375 C3.25,8.30596441 3.30596441,8.25 3.375,8.25 L4.125,8.25 Z M9,10.75 L7,10.75 L7,13.75 L9,13.75 L9,10.75 Z M8.17,1.97575 L14.69375,8.03325 C14.7315225,8.06819977 14.7440158,8.12272707 14.725228,8.17063599 C14.7064402,8.21854491 14.6602111,8.25004379 14.60875,8.25 L13.55575,8.25 C13.4926931,8.24998558 13.4319707,8.22614312 13.38575,8.18325 L8.08475,3.26075 C8.03674049,3.21635579 7.96262873,3.21646478 7.91475,3.261 L2.614,8.18325 C2.56777928,8.22614312 2.50705692,8.24998558 2.444,8.25 L1.3915,8.25 C1.33999323,8.25014705 1.29366961,8.21868551 1.27481714,8.17075271 C1.25596468,8.12281992 1.26844367,8.06823071 1.30625,8.03325 L7.83,1.97575 C7.92588829,1.8868207 8.07411171,1.8868207 8.17,1.97575 Z"
                                                    id="Shape"
                                                    fill="#BEBEBF"
                                                    fill-rule="nonzero"
                                                ></path>
                                                <path
                                                    v-else-if="menu.meta.icon === 'rsu-system'"
                                                    d="M9.2615,3.15 L8.843,3.875 C8.79834294,3.9523483 8.71581413,3.99999773 8.6265,4 L2,4 L2,10.5 L12.5,10.5 L12.5,8.57 C12.5,8.45954305 12.5895431,8.37 12.7,8.37 L13.3,8.37 C13.4104569,8.37 13.5,8.45954305 13.5,8.57 L13.5,11.25 C13.5,11.3880712 13.3880712,11.5 13.25,11.5 L7.85,11.5 C7.79477153,11.5 7.75,11.5447715 7.75,11.6 L7.75,12.4 C7.75,12.455 7.795,12.5 7.85,12.5 L10.6605,12.5 C10.7182573,12.5000137 10.7684848,12.5395962 10.782,12.59575 L10.96275,13.34575 C10.9717108,13.3829807 10.9631117,13.4222647 10.9394163,13.4523471 C10.9157209,13.4824295 10.8795439,13.4999909 10.84125,13.5 L3.66,13.5 C3.62158238,13.4999703 3.58531225,13.4822764 3.56164172,13.4520172 C3.5379712,13.4217579 3.52952976,13.3822948 3.53875,13.345 L3.7245,12.595 C3.7382866,12.5392347 3.78830579,12.5000444 3.84575,12.5 L6.65,12.5 C6.70522847,12.5 6.75,12.4552285 6.75,12.4 L6.75,11.6 C6.75,11.5447715 6.70522847,11.5 6.65,11.5 L1.25,11.5 C1.11192881,11.5 1,11.3880712 1,11.25 L1,3.25 C1,3.11192881 1.11192881,3 1.25,3 L9.175,3 C9.21070824,3.0000366 9.24368739,3.01911096 9.26152566,3.05004437 C9.27936393,3.08097778 9.27935415,3.11907575 9.2615,3.15 Z M13.44475,2.6495 L14.8005,4.9975 C14.8451582,5.07485027 14.8451582,5.17014973 14.8005,5.2475 L13.44475,7.59575 C13.4000929,7.6730983 13.3175641,7.72074773 13.22825,7.72075 L10.517,7.72075 C10.4276859,7.72074773 10.3451571,7.6730983 10.3005,7.59575 L8.94475,5.2475 C8.9000918,5.17014973 8.9000918,5.07485027 8.94475,4.9975 L10.3005,2.6495 C10.3451571,2.5721517 10.4276859,2.52450227 10.517,2.5245 L13.22825,2.5245 C13.3175641,2.52450227 13.4000929,2.5721517 13.44475,2.6495 Z M12.795,3.5245 L10.95,3.5245 L10.02725,5.1225 L10.94975,6.72075 L12.795,6.72075 L13.71775,5.12275 L12.795,3.5245 Z M11.8725,4.6225 C12.1486424,4.6225 12.3725,4.84635763 12.3725,5.1225 C12.3725,5.39864237 12.1486424,5.6225 11.8725,5.6225 C11.5963576,5.6225 11.3725,5.39864237 11.3725,5.1225 C11.3725,4.84635763 11.5963576,4.6225 11.8725,4.6225 Z"
                                                    id="Shape"
                                                    fill="#BEBEBF"
                                                    fill-rule="nonzero"
                                                ></path>
                                                <path
                                                    v-else-if="menu.meta.icon === 'rsu-billing'"
                                                    d="M15,2.75 L15,11.25 C15,11.3880712 14.8880712,11.5 14.75,11.5 L8.625,11.5 C8.55596441,11.5 8.5,11.5559644 8.5,11.625 L8.5,12.375 C8.5,12.4440356 8.55596441,12.5 8.625,12.5 L12.43,12.5 C12.4761018,12.500092 12.5161662,12.5316892 12.527,12.5765 L12.72025,13.3765 C12.727467,13.4063501 12.7205682,13.437861 12.7015388,13.4619649 C12.6825095,13.4860688 12.65346,13.5000923 12.62275,13.5 L3.3785,13.5 C3.34765348,13.5000147 3.31852651,13.4857928 3.29956829,13.4614598 C3.28061007,13.4371269 3.2739426,13.4054064 3.2815,13.3755 L3.48275,12.5755 C3.4939734,12.5310863 3.53394018,12.4999782 3.57975,12.5 L7.375,12.5 C7.44403559,12.5 7.5,12.4440356 7.5,12.375 L7.5,11.625 C7.5,11.5559644 7.44403559,11.5 7.375,11.5 L1.25,11.5 C1.11192881,11.5 1,11.3880712 1,11.25 L1,2.75 C1,2.61192881 1.11192881,2.5 1.25,2.5 L14.75,2.5 C14.8880712,2.5 15,2.61192881 15,2.75 Z M14,3.5 L2,3.5 L2,10.5 L14,10.5 L14,3.5 Z M4.25,7 L5.75,7 C5.91666667,7 6,7.08333333 6,7.25 L6,8.75 C6,8.91666667 5.91666667,9 5.75,9 L4.25,9 C4.08333333,9 4,8.91666667 4,8.75 L4,7.25 C4,7.08333333 4.08333333,7 4.25,7 Z M7.25,6 L8.75,6 C8.91666667,6 9,6.08333333 9,6.25 L9,8.75 C9,8.91666667 8.91666667,9 8.75,9 L7.25,9 C7.08333333,9 7,8.91666667 7,8.75 L7,6.25 C7,6.08333333 7.08333333,6 7.25,6 Z M10.25,5 L11.75,5 C11.9166667,5 12,5.08333333 12,5.25 L12,8.75 C12,8.91666667 11.9166667,9 11.75,9 L10.25,9 C10.0833333,9 10,8.91666667 10,8.75 L10,5.25 C10,5.08333333 10.0833333,5 10.25,5 Z"
                                                    id="Shape"
                                                    fill="#BEBEBF"
                                                    fill-rule="nonzero"
                                                ></path>
                                            </template>
                                        </g>
                                    </g>
                                </g>
                            </svg>
                            <span slot="title">{{ menu.meta.title }}</span>
                        </template>
                        <el-menu-item
                            v-for="item in menu.children.filter((item) => !item.siderHidden)"
                            :key="getItemPath(item.path)"
                            :index="getItemPath(item.path)"
                            style="padding-left: 48px;"
                        >
                            <!-- <i v-if="item.meta.icon" class="item-icon" :class="`item-icon-${item.meta.icon}`" /> -->
                            <span>{{ item.meta.title }}</span>
                        </el-menu-item>
                    </el-submenu>
                </template>
                <template v-else-if="menu.children && menu.children.length === 1">
                    <el-menu-item :key="getItemPath(menu.children[0].path)" :index="getItemPath(menu.children[0].path)">
                        <!-- <i class="submenu-icon" :class="`submenu-icon-${menu.children[0].meta.icon}`"></i> -->
                        <svg
                            width="16px"
                            height="16px"
                            class="submenu-icon"
                            viewBox="0 0 16 16"
                            version="1.1"
                            xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink"
                        >
                            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                <g id="Artboard" transform="translate(-205.000000, -58.000000)">
                                    <g transform="translate(205.000000, 58.000000)">
                                        <rect
                                            id="Rectangle"
                                            fill="#000000"
                                            opacity="0"
                                            x="0"
                                            y="0"
                                            width="16"
                                            height="16"
                                        ></rect>
                                        <template>
                                            <path
                                                v-if="menu.children[0].meta.icon === 'rsu-index'"
                                                d="M4.125,8.25 C4.19403559,8.25 4.25,8.30596441 4.25,8.375 L4.25,13.75 L6,13.75 L6,10 C6,9.86192881 6.11192881,9.75 6.25,9.75 L9.75,9.75 C9.88807119,9.75 10,9.86192881 10,10 L10,13.75 L12,13.75 L12,8.375 C12,8.30596441 12.0559644,8.25 12.125,8.25 L12.875,8.25 C12.9440356,8.25 13,8.30596441 13,8.375 L13,14.5 C13,14.6380712 12.8880712,14.75 12.75,14.75 L3.5,14.75 C3.36192881,14.75 3.25,14.6380712 3.25,14.5 L3.25,8.375 C3.25,8.30596441 3.30596441,8.25 3.375,8.25 L4.125,8.25 Z M9,10.75 L7,10.75 L7,13.75 L9,13.75 L9,10.75 Z M8.17,1.97575 L14.69375,8.03325 C14.7315225,8.06819977 14.7440158,8.12272707 14.725228,8.17063599 C14.7064402,8.21854491 14.6602111,8.25004379 14.60875,8.25 L13.55575,8.25 C13.4926931,8.24998558 13.4319707,8.22614312 13.38575,8.18325 L8.08475,3.26075 C8.03674049,3.21635579 7.96262873,3.21646478 7.91475,3.261 L2.614,8.18325 C2.56777928,8.22614312 2.50705692,8.24998558 2.444,8.25 L1.3915,8.25 C1.33999323,8.25014705 1.29366961,8.21868551 1.27481714,8.17075271 C1.25596468,8.12281992 1.26844367,8.06823071 1.30625,8.03325 L7.83,1.97575 C7.92588829,1.8868207 8.07411171,1.8868207 8.17,1.97575 Z"
                                                id="Shape"
                                                fill="#BEBEBF"
                                                fill-rule="nonzero"
                                            ></path>
                                            <path
                                                v-else-if="menu.children[0].meta.icon === 'rsu-rectangle'"
                                                d="M13.25,1 C13.3880712,1 13.5,1.11192881 13.5,1.25 L13.5,10.8965 C13.5000522,10.9627628 13.4737957,11.0263359 13.427,11.07325 L9.57825,14.92675 C9.53137682,14.9736373 9.4677987,14.9999858 9.4015,15 L2.75,15 C2.61192881,15 2.5,14.8880712 2.5,14.75 L2.5,1.25 C2.5,1.11192881 2.61192881,1 2.75,1 L13.25,1 Z M12.5,2 L3.5,2 L3.5,14 L8.5,14 L8.5,10.25 C8.5,10.1119288 8.61192881,10 8.75,10 L12.5,10 L12.5,2 Z M11.966,11 L9.625,11 C9.55596441,11 9.5,11.0559644 9.5,11.125 L9.5,13.46925 C9.49998381,13.4895177 9.51220441,13.5077902 9.5309421,13.5155154 C9.5496798,13.5232406 9.57122746,13.5188901 9.5855,13.5045 L12.00125,11.08525 C12.0154615,11.070954 12.0196985,11.0495222 12.0119959,11.0308939 C12.0042933,11.0122656 11.9861578,11.0000846 11.966,11 Z M4.8205,3.5 L11.1795,3.5 C11.291,3.5 11.33125,3.5115 11.372,3.5335 C11.41275,3.55525 11.44475,3.58725 11.4665,3.628 C11.4885,3.66875 11.5,3.709 11.5,3.8205 L11.5,4.1795 C11.5,4.291 11.4885,4.33125 11.4665,4.372 C11.4451838,4.41225975 11.4122597,4.44518378 11.372,4.4665 C11.33125,4.4885 11.291,4.5 11.1795,4.5 L4.8205,4.5 C4.709,4.5 4.66875,4.4885 4.628,4.4665 C4.58774025,4.44518378 4.55481622,4.41225975 4.5335,4.372 C4.5115,4.33125 4.5,4.291 4.5,4.1795 L4.5,3.8205 C4.5,3.709 4.5115,3.66875 4.5335,3.628 C4.55481622,3.58774025 4.58774025,3.55481622 4.628,3.5335 C4.66875,3.5115 4.709,3.5 4.8205,3.5 Z M4.8205,5.5 L11.1795,5.5 C11.291,5.5 11.33125,5.5115 11.372,5.5335 C11.41275,5.55525 11.44475,5.58725 11.4665,5.628 C11.4885,5.66875 11.5,5.709 11.5,5.8205 L11.5,6.1795 C11.5,6.291 11.4885,6.33125 11.4665,6.372 C11.4451838,6.41225975 11.4122597,6.44518378 11.372,6.4665 C11.33125,6.4885 11.291,6.5 11.1795,6.5 L4.8205,6.5 C4.709,6.5 4.66875,6.4885 4.628,6.4665 C4.58774025,6.44518378 4.55481622,6.41225975 4.5335,6.372 C4.5115,6.33125 4.5,6.291 4.5,6.1795 L4.5,5.8205 C4.5,5.709 4.5115,5.66875 4.5335,5.628 C4.55481622,5.58774025 4.58774025,5.55481622 4.628,5.5335 C4.66875,5.5115 4.709,5.5 4.8205,5.5 Z M4.8205,7.5 L7.6795,7.5 C7.791,7.5 7.83125,7.5115 7.872,7.5335 C7.91275,7.55525 7.94475,7.58725 7.9665,7.628 C7.9885,7.66875 8,7.709 8,7.8205 L8,8.1795 C8,8.291 7.9885,8.33125 7.9665,8.372 C7.94518378,8.41225975 7.91225975,8.44518378 7.872,8.4665 C7.83125,8.4885 7.791,8.5 7.6795,8.5 L4.8205,8.5 C4.709,8.5 4.66875,8.4885 4.628,8.4665 C4.58774025,8.44518378 4.55481622,8.41225975 4.5335,8.372 C4.5115,8.33125 4.5,8.291 4.5,8.1795 L4.5,7.8205 C4.5,7.709 4.5115,7.66875 4.5335,7.628 C4.55481622,7.58774025 4.58774025,7.55481622 4.628,7.5335 C4.66875,7.5115 4.709,7.5 4.8205,7.5 Z"
                                                id="Shape"
                                                fill="#BEBEBF"
                                                fill-rule="nonzero"
                                            ></path>
                                            <path
                                                v-else-if="menu.children[0].meta.icon === 'rsu-services'"
                                                d="M14,1.756 C14.1380712,1.756 14.25,1.86792881 14.25,2.006 L14.25,14.006 C14.25,14.1440712 14.1380712,14.256 14,14.256 L2,14.256 C1.86192881,14.256 1.75,14.1440712 1.75,14.006 L1.75,2.006 C1.75,1.86792881 1.86192881,1.756 2,1.756 L14,1.756 Z M13.25,2.756 L2.75,2.756 L2.75,13.256 L13.25,13.256 L13.25,2.756 Z M6.5,9.25 C6.99713755,9.24992349 7.44708534,9.54439193 7.646,10 L11.625,10 C11.6940356,10 11.75,10.0559644 11.75,10.125 L11.75,10.875 C11.75,10.9440356 11.6940356,11 11.625,11 L7.646,11 C7.44721878,11.4557806 6.99724235,11.750441 6.5,11.750441 C6.00275765,11.750441 5.55278122,11.4557806 5.354,11 L4.375,11 C4.30596441,11 4.25,10.9440356 4.25,10.875 L4.25,10.125 C4.25,10.0559644 4.30596441,10 4.375,10 L5.354,10 C5.55291466,9.54439193 6.00286245,9.24992349 6.5,9.25 Z M6.5,10 C6.22385763,10 6,10.2238576 6,10.5 C6,10.7761424 6.22385763,11 6.5,11 C6.77614237,11 7,10.7761424 7,10.5 C7,10.2238576 6.77614237,10 6.5,10 Z M9.5,6.75 C9.99713755,6.74992349 10.4470853,7.04439193 10.646,7.5 L11.625,7.5 C11.6940356,7.5 11.75,7.55596441 11.75,7.625 L11.75,8.375 C11.75,8.44403559 11.6940356,8.5 11.625,8.5 L10.646,8.5 C10.4472188,8.95578063 9.99724235,9.25044097 9.5,9.25044097 C9.00275765,9.25044097 8.55278122,8.95578063 8.354,8.5 L4.375,8.5 C4.30596441,8.5 4.25,8.44403559 4.25,8.375 L4.25,7.625 C4.25,7.55596441 4.30596441,7.5 4.375,7.5 L8.354,7.5 C8.55291466,7.04439193 9.00286245,6.74992349 9.5,6.75 Z M9.5,7.5 C9.22385763,7.5 9,7.72385763 9,8 C9,8.27614237 9.22385763,8.5 9.5,8.5 C9.77614237,8.5 10,8.27614237 10,8 C10,7.72385763 9.77614237,7.5 9.5,7.5 Z M6.5,4.25 C6.99713755,4.24992349 7.44708534,4.54439193 7.646,5 L11.625,5 C11.6940356,5 11.75,5.05596441 11.75,5.125 L11.75,5.875 C11.75,5.94403559 11.6940356,6 11.625,6 L7.646,6 C7.44721878,6.45578063 6.99724235,6.75044097 6.5,6.75044097 C6.00275765,6.75044097 5.55278122,6.45578063 5.354,6 L4.375,6 C4.30596441,6 4.25,5.94403559 4.25,5.875 L4.25,5.125 C4.25,5.05596441 4.30596441,5 4.375,5 L5.354,5 C5.55291466,4.54439193 6.00286245,4.24992349 6.5,4.25 Z M6.5,5 C6.22385763,5 6,5.22385763 6,5.5 C6,5.77614237 6.22385763,6 6.5,6 C6.77614237,6 7,5.77614237 7,5.5 C7,5.22385763 6.77614237,5 6.5,5 Z"
                                                id="Shape"
                                                fill="#BEBEBF"
                                                fill-rule="nonzero"
                                            ></path>
                                        </template>
                                    </g>
                                </g>
                            </g>
                        </svg>
                        <span class="menu-text">{{ menu.children[0].meta.title }}</span>
                    </el-menu-item>
                </template>
                <!-- 没有子菜单 -->
                <template v-else>
                    <el-menu-item :key="getItemPath(menu.path)" :index="getItemPath(menu.path)">
                        <!-- <i class="submenu-icon" :class="`submenu-icon-${menu.meta.icon}`"></i> -->
                        <span class="menu-text">{{ menu.meta.title }}xxxxxx</span>
                    </el-menu-item>
                </template>
            </template>
        </template>
    </el-menu>
</template>

<script>
import {CommonUrls, getItemPath} from '@/utils/router-helper.js';
import {mapState} from 'vuex';
const MODULE_BASE_URL = CommonUrls.Root;
export default {
    name: 'Menu',
    components: {},
    data() {
        return {};
    },
    computed: {
        ...mapState({
            routerSides: (state) => state.permission.routerSides
        })
    },
    methods: {
        getItemPath(...paths) {
            return getItemPath(MODULE_BASE_URL, ...paths);
        }
    }
};
</script>
<style lang="less">
@buttonWidth: 50px;

.data-management-center-aside-menu {
    text-align: left;

    &.el-menu {
        border-right: none;

        .submenu-icon,
        .item-icon {
            display: inline-block;
            width: 16px;
            height: 16px;
            margin-right: 15px;
        }

        .el-menu-item {
            height: 56px;
            line-height: 56px;
            color: #bebebf !important;
            border-left: 3px solid transparent !important;

            path {
                fill: #bebebf;
            }

            &.is-active {
                border-left: 3px solid #006aff !important;
                background: #19191c !important;
                color: #f9fbff !important;

                path {
                    fill: #f9fbff;
                }
            }
        }

        .el-submenu {
            border-left: 3px solid transparent !important;

            .el-submenu__title {
                color: #bebebf !important;
            }

            path {
                fill: #bebebf;
            }

            &.is-active {
                .el-submenu__title {
                    color: #f9fbff !important;
                }

                path {
                    fill: #f9fbff;
                }
            }
        }
    }
}
</style>
